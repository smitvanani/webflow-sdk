// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma-client"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Project {
  id                String    @id @default(uuid())
  userId            String
  title             String
  domain            String    @unique
  prodTreeId        String? // exists when published
  devTreeId         String
  prodTreeIdHistory History[]
}

model History {
  id        String   @id @default(uuid())
  entry     String
  Project   Project? @relation(fields: [projectId], references: [id])
  projectId String?
}

model User {
  id String @id @default(uuid())
}

model Tree {
  id   String @id @default(uuid())
  root String
}

model InstanceProps {
  id         String  @id @default(uuid())
  instanceId String
  treeId     String
  props      Props[]
}

model Props {
  id              String         @id @default(uuid())
  prop            String
  value           String
  InstanceProps   InstanceProps? @relation(fields: [instancePropsId], references: [id])
  instancePropsId String?
}

model Breakpoints {
  treeId String       @id @default(uuid())
  values Breakpoint[]
}

model Breakpoint {
  id                String       @id @default(uuid())
  label             String
  minWidth          Int
  Breakpoints       Breakpoints? @relation(fields: [breakpointsTreeId], references: [treeId])
  breakpointsTreeId String?
}
